//=================================================================
// Base
//=================================================================

@mixin base($custom: ()) {

	//-------------------------------------------------------------
	// Config
	//-------------------------------------------------------------

	$base: config((
		name             : base,
		output-JSON      : true,
		background       : color(greyscale, grey-1),
		font-family      : typography(typefaces, primary),
		text-color       : typography(colors, base),
		font-size        : typography(sizes, base),
		margin           : 2rem,
		line-height      : 1.4,
		radius           : 0.4em,
		oval-radius      : 1.5em,
		transition       : 0.4s
	), $custom) !global;

	//-------------------------------------------------------------
	// General
	//-------------------------------------------------------------
	
	html, body {
		padding: 0;
		margin: 0;
	    height: 100%;
	}
	
	html {
	    overflow-x: hidden;
	}
	
	body {
		background: base(background);
	    font-family: base(font-family);
	    color: base(text-color);
	    font-size: base(font-size);
	    line-height: base(line-height);
	}
	
	ins {
		font-weight: bold;
		color: color(brand, primary);
		text-decoration: none;
	}

	// animate data-manipulate.js elements
	[data-trigger],
	[data-trigger-reverse],
	[data-hover] {
		transition: base(transition);
	}

	//-------------------------------------------------------------
	// Structure
	//-------------------------------------------------------------
	
	@include module(container) {
	
        width: option($grid, options, base-width);
        max-width: option($grid, options, max-width);
        margin: 0 auto;
		position: relative;
	
	    @include modifier(small) {
	        width: option($grid, options, small-width);
			max-width: (option($grid, options, max-width) * 0.85);
	    }
	
	    @include modifier(full) {
	        width: option($grid, options, full-width);
	        max-width: option($grid, options, full-width);
	    }
		
		@include modifier(section) {
			padding: 4em 0;
		}
	
	} // component(container)

	.wrapper {
	    padding: 0 option($grid, options, gutter);
	}

	//-------------------------------------------------------------
	// Layout
	//-------------------------------------------------------------
	
	* {
	    &, &:before, &:after {
	        box-sizing: border-box;
	    }
	}
	
	h1, h2, h3, h4, h5, h6, 
	p, ul, ol, 
	form, fieldset, legend, figure, table, 
	pre, hr,
	.object {
	    margin: base(margin) 0;
	    @include vertical-rhythm;
	}
    
    .object-small {
	    margin: (base(margin) / 2) 0;
	    @include vertical-rhythm;
    }
    
    .object-large {
	    margin: (base(margin) * 2) 0;
	    @include vertical-rhythm;
    }
	
	::selection {
		background-color: color(brand, primary);
		color: color(greyscale, white);
		text-shadow: none;
	}

} // @mixin base

//-----------------------------------------------------------------
// Utilities
//-----------------------------------------------------------------

@function base($key) {
    @return map-get($base, $key);
}

//-----------------------------------------------------------------
// Hacks - if this gets big move to seperate file
//-----------------------------------------------------------------

.owl-carousel .owl-item img {
    transform-style: flat;
    width: auto;
}

.owl-carousel .owl-item > img {
    transform-style: preserve-3d;
    width: 100%;
}

body {
    ::-webkit-scrollbar {
        -webkit-appearance: none;
        width: 7px;
    }
    ::-webkit-scrollbar-thumb {
        border-radius: 4px;
        background-color: rgba(black, 0.2);
        -webkit-box-shadow: 0 0 1px rgba(white, 0.5);
    }
}


//////


@mixin panels-list() {

	@include module('panels-list') {
        
        margin-left: -.75%;
        margin-right: -.75%;

		@include component('item') {
			
            float: left;
            padding-left: .75%;
            padding-right: .75%;
            width: 100%;
            box-sizing: border-box;
            margin-bottom: 1.5%;
            @media only screen and (min-width: 50rem) {
                float: left;
                padding-left: .75%;
                padding-right: .75%;
                width: 25%;
                box-sizing: border-box;
            }
            
			@include modifier('featured') {
                float: left;
                padding-left: .75%;
                padding-right: .75%;
                width: 100%;
                box-sizing: border-box;
                @media only screen and (min-width: 50rem) {
                    float: left;
                    padding-left: .75%;
                    padding-right: .75%;
                    width: 50%;
                    box-sizing: border-box;
                }
                @include overwrite-component('content') {
                    position: relative;
                    padding-top: 48.45360825%;
                    height: 0;
                }
            }
            
			@include modifier('twitter') { 
                @include overwrite-component('content', $is: 'title') {
                    display: none;
                } 
                @include nested-modifier('no-image') {
                    @include overwrite-component('content', $is: 'text') {
                        position: relative;
                        height: 100%;
                        background-color: #190625;
                        background-color: transparent;
                    } 
                    @include overwrite-component('content', $is: 'image') {
                        display: none;
                    } 
                    @include overwrite-component('content', $is: 'text') {
                        display: table;
                        width: 100%;
                        @media only screen and (min-width: 68rem) {
                            padding: 1.5rem;
                        }
                    } 
                    @include overwrite-component('content', $is: 'summary') {
                        display: table-cell;
                        vertical-align: middle;
                        text-align: center;
                        @media only screen and (min-width: 68rem) {
                            font-size: 1rem;
                            line-height: 1.5;
                        }
                    } 
                    @include overwrite-component('content', $is: 'icon') {
                        display: none;
                    }  
                    @include overwrite-component('content', $is: 'title') {
                        @media only screen and (min-width: 68rem) {
                            font-size: 1rem;
                        }
                    }
                }
                @include nested-modifier('image') {
                    @include overwrite-component('content', $is: 'text') {
                        position: relative;
                        height: 100%;
                        background-color: #190625;
                        background-color: transparent;
                        display: table;
                        width: 100%;
                        @media only screen and (min-width: 68rem) {
                            position: relative;
                            height: 50%;
                            background-color: #190625;
                            background-color: transparent;
                        }
                    } 
                    @include overwrite-component('content', $is: 'image') {
                        display: none;
                        @media only screen and (min-width: 68rem) {
                            display: inline-block;
                            height: 50%
                        }
                    }  
                    @include overwrite-component('content', $is: 'summary') {
                        display: table-cell;
                        vertical-align: middle;
                        @media only screen and (min-width: 68rem) {
                            display: block;
                            text-align: left;
                            &:before {
                                display: none;
                            }
                        }
                    } 
                    @include overwrite-component('content', $is: 'icon') {
                        display: none;
                        @media only screen and (min-width: 68rem) {
                            display: block;
                        }
                    } 
                }
            }
            
            @include modifiers(('no-summary', 'youtube')) {
                @include overwrite-component('content', $is: 'text') {
                    position: absolute;
                    bottom: 0;
                    left: 0;
                    right: 0;
                    height: auto;
                    background-color: #190625;
                    background-color: rgba(25, 6, 37, .8);
                }  
                @include overwrite-component('content', $is: 'image') {
                    display: inline-block;
                    height: 100%
                }  
                @include overwrite-component('content', $is: 'summary') {
                    display: none;
                }   
            }
            
            @include overwrite-component('content') {
                @include modifier('image') {
                    display: inline-block;
                    height: 100%;
                    @media only screen and (min-width: 68rem) {
                        display: inline-block;
                        height: 50%
                    }
                }
                @include modifier('image') {
                    display: none;
                    @media only screen and (min-width: 68rem) {
                        
                    }
                }
                @include modifier('text') {
                    padding: 12px 12px 24px;
                    padding: .75rem .75rem 1.5rem;
                    @media only screen and (min-width: 68rem) {
                        position: relative;
                        height: 50%;
                        background-color: #190625;
                        background-color: transparent;
                    }
                }
                @include modifier('text') {
                    padding: 12px 12px 24px;
                    padding: .75rem .75rem 1.5rem;
                    @media only screen and (min-width: 68rem) {
                        padding: .75rem .75rem 1.5rem; 
                    }
                }
                @include modifier('title') {
                    font-size: 12px;
                    font-size: .8rem;
                    @media only screen and (min-width: 68rem) {
                        font-size: 1rem;
                    }
                }
                @include modifier('summary') {
                    font-size: 12px;
                    font-size: .75rem;
                    line-height: 1.4;
                    @media only screen and (min-width: 68rem) {
                        display: block;
                        font-size: .75rem;
                        line-height: 1.6;
                    }
                }
            }

		}
	
		@include component('content') {
            
            position: relative;
            padding-top: 48.45360825%;
            height: 0;
            display: block;
            border: 0 none;
            @media only screen and (min-width: 30rem) {
                position: relative;
                padding-top: 100%;
                height: 0
            }
			
			@include modifier('container') {
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background-color: #190625;
                overflow: hidden;
                text-align: center
            }
            
			@include modifier('image') {
                max-width: none;
                margin-left: -50%;
                margin-right: -50%;
            }
            	
			@include modifier('title') {
                color: #51aaff;
                text-align: left
            }
            
		    @include modifier('summary') {
                font-size: 12px;
                font-size: .75rem;
                color: #fff;
                text-align: left
            }
            
			@include modifier('date') {
                position: absolute;
                bottom: 2px;
                right: 5px;
                color: #6d67d6;
                font-size: 9px;
                font-size: .6rem;
                text-transform: uppercase
            }
            
			@include modifier('play-button') {
                display: none
            }
            
			@include modifier('icon') {
                display: none
            }
            
            @include modifier('text') {
                position: absolute;
                bottom: 0;
                left: 0;
                right: 0;
                height: auto;
                background-color: #190625;
                background-color: rgba(25, 6, 37, .8);
            }

		}

	}

}