//=================================================================
// Headings
//=================================================================

@mixin headings($custom: ()) {

	//-------------------------------------------------------------
	// Config
	//-------------------------------------------------------------

	$headings: config((
		name            : heading,
		output-JSON     : true
	), $custom);
	
	//-------------------------------------------------------------
	// Component
	//-------------------------------------------------------------

	@include module(heading) {

	// Core Styles
	//-------------------------------------------------------------

		line-height: 1;
		font-size: font-size(base);
		transition: base(transition);

	// Sizes
	//-------------------------------------------------------------

		@include font-sizes;

	// Patterns
	//-------------------------------------------------------------

		@include modifier(heavy) {
			font-weight: bolder;
			font-weight: 900;
		}
	
		@include modifier(brand-1) {
			font-style: normal;
			color: color(brand, primary);
		}
	
		@include modifier(uppercase) {
			text-transform: uppercase;
		}
	
		@include modifier(light) {
			font-weight: lighter;
			font-weight: 100;
			font-style: normal;
		} 
	
		@include modifier(highlight) {
            $highlight-dimensions: 0.3em;
			margin-left: $highlight-dimensions;
			margin-right: $highlight-dimensions;
			line-height: 1.5;
			> b {
				background: color(brand, primary);
				color: white;
                padding: 0.1em 0;
				font-weight: normal;
				box-shadow: $highlight-dimensions 0 0 color(brand, primary), -$highlight-dimensions 0 0 color(brand, primary);
				text-shadow: none;    
				&:not(:first-child) {
					margin-top: ($highlight-dimensions / 2);
				}        
			}      
			@-moz-document url-prefix() {
				box-shadow: none;
				margin-left: 0;
				margin-right: 0;
				padding: 0 $highlight-dimensions;
				> b {                
					box-decoration-break: clone;
				}
			}
			@include nested-modifier(dark) {
				> b {
					background: color(greyscale, grey-6);
					box-shadow: $highlight-dimensions 0 0 color(greyscale, grey-6), -$highlight-dimensions 0 0 color(greyscale, grey-6);
				}
			}
		}
	
		@include modifier(strikethrough) {
            > span {
				position: relative;
				&:before,
				&:after {
					content: "";
					position: absolute;
					width: 75px;
					border-bottom: 1px solid;
					opacity: 0.75;
					top: 50%;
                    color: inherit;
					transform: translateY(-50%) translateZ(0);
				}
				&:before {
					left: -90px;
					left: calc(-75px - 1rem);
				}
				&:after {
					right: -90px;
					right: calc(-75px - 1rem);
				}
			}
            @include nested-modifier('dots') {
                > span {
                    &:before, &:after {
                        border-bottom-style: dotted;
                        opacity: 0.5;
                    }
                }
            }
		}
	
		@include modifier(spaced) {
			text-indent: 0.3em;
			&, span {            
				letter-spacing: 0.35em;
			}
			@include nested-modifier(strikethrough) {
				span {
					&:after {
						right: calc(-75px - 1rem + 0.35em);
					}
				}
			} 
		}

		@include modifier(dotted) {
			border-bottom: 1px dotted rgba(0,0,0,0.2);
			padding-bottom: 0.75rem;
			a {
				color: inherit;
			}
		}
		
		@include modifier(flush) {
			margin: 0 !important;
		}
        
        @include modifier('sub') {
            color: color('greyscale', grey-4);
        }

	// Styles
	//-------------------------------------------------------------

//		@include modifier(primary) {
//			@include extend(heavy, size-4, uppercase);
//		}  

	// Components
	//-------------------------------------------------------------
	
		//---------------------------------------------------------
		// Heading Group
		//---------------------------------------------------------
	
		@include component(group) {
		
			// Core Styles
			//-----------------------------------------------------
		
			@include vertical-rhythm(bottom);
			margin-bottom: base(margin);
			font-size: 1rem;
			position: relative;
			background-size: cover;
	
			@include overwrite(heading) {
				margin-top: 0.5em;
				margin-bottom: 0.5em;
				line-height: 0.8;
				@include vertical-rhythm;
			}
	
			p {
				color: color(greyscale, grey-4);
			}
	
			// Modifiers
			//-----------------------------------------------------
		
			@include modifier(dots) {
				position: relative;
				margin-bottom: 3em;
				&:after {
					content: "• • •";
					position: absolute;
					color: rgba(color(greyscale, black), 0.4);
					font-size: 24px;
					font-weight: 600;
					bottom: -2.25em;
					left: 0;
					right: 0;
					margin: auto;
				}
			}
		
			@include modifier(block) {
				padding: 6em 0;
				margin-bottom: 0;
				&.has-icon {
					padding-bottom: 5em;
				}
			}
			
			@include modifier(small) {
				@include vertical-rhythm;
				margin-top: (base(margin) / 2);
				margin-bottom: (base(margin) / 2);
			}
		
			@include modifier(large) {
				margin-bottom: (base(margin) * 2);
				@include vertical-rhythm(bottom);
			}
		
		} // sub-component(group)

		//---------------------------------------------------------
		// Heading Icon
		//---------------------------------------------------------
		
		@include component(icon) {
		
			display: inline-block;
			position: relative;
			font-size: font-size(size-5);
		
			.fa {
				position: relative;
				width: 0.85em;
				height: 0.85em;
				line-height: 0.85em;
				font-size: font-size(size-4);
				color: color(greyscale, grey-5);
				border: 1px solid color(brand, primary);
				border-radius: 50%;
				&:before {
					position: absolute;
					left: 50%;
					transform: translateX(-50%);
				}
			}
		
			&:before,
			&:after {
				content: "";
				width: 2em;
				border-bottom: 1px solid color(brand, primary);
				@include vertical-center(absolute);
			}
		
			&:before {
			   left: -2em;
			}
			
			&:after {
			   right: -2em;
			}
		
		} // sub-component(icon)
		
		//---------------------------------------------------------
		// Heading Date
		//---------------------------------------------------------
			
			@include component(date) {
				float: right;
				text-align: center;
				width: 45px;
				div {
					&:first-child {
						background: color(brand, primary);
						color: white;
						font-size: font-size(size-2);
					}
					&:last-child {
						background: color(greyscale, white);
						font-weight: lighter;
						color: color(greyscale, grey-4);
						border: 1px solid rgba(black, 0.1);
						line-height: 2;
					}
				}
                + [class*="heading"] {
                    margin-top: 0;
                }
			}

	} // component(heading)
	
} // @mixin headings