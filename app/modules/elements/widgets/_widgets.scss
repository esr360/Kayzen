//=================================================================
// Widgets
//=================================================================

@mixin widgets($custom: ()) {

	//-------------------------------------------------------------
	// Config
	//-------------------------------------------------------------

	$widgets: config((
		name            : widget
	), $custom);

	//-------------------------------------------------------------
	// Component
	//-------------------------------------------------------------

	@include module(widget) {

	// Core Styles
	//-------------------------------------------------------------
	
		transition: base(transition);
		
		&:hover {
			text-decoration: none;
		}

		@include overwrite-component(group, $parent: heading) {
			margin-bottom: 0;
		}

	// Modifiers
	//-------------------------------------------------------------
	
		//---------------------------------------------------------
		// Block
		//---------------------------------------------------------
		
		@include modifier(block) {
			background: color(greyscale, white);
			padding: 2.5em 1em;
			@include modifier(small) {
				padding: 1.5em 1em;
				@include overwrite-component(icon) {
					margin-bottom: base(margin) * 0.57; // magic number 1 of 1
				}
			}
			@include modifier(fill) {
				background-color: color(brand, primary);	
				color: color(greyscale, white);
				@include overwrite(heading) {
					color: color(greyscale, white);
				}
				@include overwrite-component(icon) {
					color: color(greyscale, white);
				}
			}
            @include modifier('noHover', $special: 'not') {
                &:hover {
                    background-color: color(brand, primary);	
                    color: color(greyscale, white);
                    @include overwrite(heading) {
                        color: color(greyscale, white);
                    }
                    @include overwrite-component(icon) {
                        color: color(greyscale, white);
                    }
                    @include modifier(fill) {
                        background-color: darken(color(brand, primary), 10%);
                    }
                    @include modifier(panel) {
                        border-color: color(brand, primary);
                    }
                }
            }
		}
		
		//---------------------------------------------------------
		// Panel
		//---------------------------------------------------------
	
		@include modifier(panel) {
			padding: 4%;
			border-top: 1px solid color(greyscale, grey-2);	
			border-left: 1px solid color(greyscale, grey-2);
			@include modifier(small) {
				padding: 4% 2%;
			}
            &:last-child {
                position: relative;
                &:before, &:after {
                    content: "";
                    position: absolute;
                    top: -1px;
                    transition: base(transition);
			        background: color(greyscale, grey-2);
                }
                &:before {
                    height: 100%;
                    width: 1px;
                    right: -1px;
                    z-index: 2;
                }
                &:after {
                    height: 1px;
                    width: 1000%;
                    left: 100%;
                }
                &:hover {
                    &:before {
			            background: color(brand, primary);
                    }
                }
            }
		}
		
		//---------------------------------------------------------
		// Border
		//---------------------------------------------------------
	
		@include modifier(borderTop) {
			border: 0; // reset border
			border-top: 0.6em solid rgba(black, 0.15);
			@include modifier(highlight) {
				border-top-color: color(brand, primary);
				&:hover {
					border-top-color: rgba(black, 0.15);
				}
			}
		}
	
		@include modifier(borderLeft) {
			border-left: 0.6em solid rgba(black, 0.15);
			@include modifier(highlight) {
				border-left-color: color(brand, primary);
				&:hover {
					border-left-color: rgba(black, 0.15);
				}
			}
		}
		
		//---------------------------------------------------------
		// Card
		//---------------------------------------------------------
		
		@include modifier(card) {
            position: relative;
			@include overwrite-component(content) {
				border: 1px solid rgba(black, 0.1);
				border-top: 0;
				padding: base(margin);
			}
			@include overwrite(thumbnail) {
				margin-bottom: 0;
			}
		}
	
		//---------------------------------------------------------
		// Stacked
		//---------------------------------------------------------
		
		@include modifier(stacked) {
			margin-bottom: base(margin);
			@include vertical-rhythm(bottom);
			p {
				margin-top: (base(margin) / 2);
			}
		}
		
		//---------------------------------------------------------
		// Scale
		//---------------------------------------------------------
	
		@include modifier(scale) {
			z-index: 1;
			transform: translateZ(0);
			&:hover {
				transform: scale(1.1) translateZ(0);
				z-index: 5;
			}
		}
		
		//---------------------------------------------------------
		// Zoom
		//---------------------------------------------------------
		
		@include modifier(zoom) {
			overflow: hidden;
			@include overwrite-component(group, $parent: heading) {
				color: color(greyscale, white);
			}
			&:hover {
				.bg-img {
					transform: scale(1.3);
				}
			}
		}
		
		//---------------------------------------------------------
		// Media
		//---------------------------------------------------------
		
		@include modifier(media) {
			position: relative;
		}
		
		//---------------------------------------------------------
		// Spectrum
		//---------------------------------------------------------
		
		@include modifier(spectrum-quarter) {
			padding: 2.5em 1em;
            color: color('greyscale', white);
			&:nth-child(1) {
				background: darken(color(brand, primary), 6%);
			}
			&:nth-child(2) {
				background: darken(color(brand, primary), 2%);
			}
			&:nth-child(3) {
				background: lighten(color(brand, primary), 2%);
			}
			&:nth-child(4) {
				background: lighten(color(brand, primary), 6%);
			}
			@include overwrite(button) {
				color: rgba(white, 0.5);
			}
			&:hover {
				@include overwrite(button) {
					color: color(greyscale, white);
				}
			}
            @include modifier('large') {
			    padding: 4%;
            }
		}
		
		//---------------------------------------------------------
		// Tub
		//---------------------------------------------------------
	
		@include modifier(tub) {
			padding: 0;
			position: relative;
			color: color(greyscale, white);
			&:before {
				@extend %fill-parent;
				content: "";
				background: rgba(black, 0.4);
			}
			&:hover {
				@include overwrite-component(lid) {
					transform: translateY(-100%);
				}
				@include overwrite-component(content) {
					transform: scale(1) translateY(-50%);
				}
				@include overwrite-component(sticker) {
					top: 50%;
				}
			}
			@include overwrite-component(content) {
				position: absolute;
                top: calc(50% - 1em);
				width: 80%;
				transition: base(transition);
                left: 0;
                right: 0;
                margin: auto;
				transform: scale(0) translateY(-50%);
                @include overwrite('button', $special: 'adjacent-sibling') {
                    position: absolute;
                    z-index: 2;
                    left: 0;
                    bottom: 0;
                    background: rgba(black, 0.4);
                    font-weight: bold;
                }
			}
			@include overwrite-component('group', $parent: 'heading') {
                color: color(greyscale, white);
            }
		}
		
		@include component(lid) {
			background-color: inherit;
			position: relative;
			transition: base(transition);
			padding-top: 80%;
            height: 0;
			z-index: 2;
            @include overwrite('icon') {
                color: color(greyscale, white);
            }
		}
        
        @include component('sticker') {
            position: absolute;
            top: calc(50% - 0.5em);
            transform: translateY(-50%);
            left: 0;
            right: 0;
            margin: auto;
        }
		
		//---------------------------------------------------------
		// Feature
		//---------------------------------------------------------
		
		@include modifier(feature) {
			padding: 15% 2em 2em;
            position: relative;
		}
	
		//---------------------------------------------------------
		// Greyscale
		//---------------------------------------------------------
		
		@include modifier(greyscale) {    
			@extend %greyscale;
			&:hover {
				filter: url("data:image/svg+xml;utf8,&lt;svg xmlns=\'http://www.w3.org/2000/svg\'&gt;&lt;filter id=\'grayscale\'&gt;&lt;feColorMatrix type=\'matrix\' values=\'1 0 0 0 0, 0 1 0 0 0, 0 0 1 0 0, 0 0 0 1 0\'/&gt;&lt;/filter&gt;&lt;/svg&gt;#grayscale");
    			-webkit-filter: grayscale(0%);
			}
		}
		
		//---------------------------------------------------------
		// Article
		//---------------------------------------------------------
        
        @include modifiers(('article', 'card')) {
            overflow: hidden;
            iframe {
                display: block;
            }
        }
        
        @include modifier('article') {
            margin-bottom: base(margin);
            &:not([class*="span"]) {
                &:after {
                    content: "";
                    display: block;
                    margin-top: base(margin);
                    @include extend(
                        $parent: 'hrule', 
                        $modifiers: 'stripes'
                    );
                }
            }
            &:last-of-type,  {
                margin-bottom: 0;
                &:after {
                    display: none;
                }
            }
            + .ias-noneleft {
               position: relative;
               bottom: 0;
            }
            > .owl-carousel {
                @extend .object;
            }
        }
			
	// Components
	//-------------------------------------------------------------
	
		@include component {
			@include modifier(inline) {
				display: inline-block;
				vertical-align: middle;
				margin-bottom: 0 !important;
				+ p {
					margin-top: (base(margin) / 2);
				}
			}
		}
		
		//---------------------------------------------------------
		// Group
		//---------------------------------------------------------
		
		@include component(group) {
			@include modifier(large) {
				margin-bottom: (base(margin) * 2);
				@include vertical-rhythm(bottom);
			}
			@include modifier(grid) {
				margin-bottom: -#{option($grid, options, gutter)} !important;
				@include overwrite(widget) {
					margin-bottom: option($grid, options, gutter);
				}
			}
            @include modifier('center') {
                @include overwrite {
                    text-align: center;
                }
            }
		}
		
		//---------------------------------------------------------
		// Icon
		//---------------------------------------------------------
		
		@include component(icon) {
			color: color(greyscale, grey-3);
			margin-bottom: base(margin);
			@include modifier(inline) {
				margin-right: 0.5rem;
			}
			@include context(parent-hovered) {
				color: color(brand, primary);
			}
		}
		
		//---------------------------------------------------------
		// Header
		//---------------------------------------------------------
		
		@include component(header) {
			@include overwrite-component(icon, $special: adjacent-sibling) {
				margin-left: 0.5rem;
				margin-right: 0;
			}
			.col-full & {
				position: absolute;
				bottom: 2em;
			}
		}
		
		//---------------------------------------------------------
		// Controls
		//---------------------------------------------------------
		
		@include component(controls) {
			position: absolute;
			bottom: 0;
		}
	
	} // component(widget)
	
} // @mixin widgets