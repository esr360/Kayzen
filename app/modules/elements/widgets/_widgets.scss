//=================================================================
// Widgets
//=================================================================

@mixin widgets($custom: ()) {

	//-------------------------------------------------------------
	// Config
	//-------------------------------------------------------------

	$widgets: config((
		name            : widget
	), $custom);

	//-------------------------------------------------------------
	// Component
	//-------------------------------------------------------------

	@include component(widget) {

	// Core Styles
	//-------------------------------------------------------------
	
		transition: base(transition);
		
		&:hover {
			text-decoration: none;
		}

		@include overwrite-sub(group, $parent: heading) {
			margin-bottom: 0;
		}

	// Modifiers
	//-------------------------------------------------------------
	
		//---------------------------------------------------------
		// Block
		//---------------------------------------------------------
		
		@include modifier(block) {
			background: color(greyscale, white);	
			padding: 2.5em 1em;
			@include nested-modifier(small) {
				padding: 1.5em 1em;
				@include overwrite-sub(icon) {
					margin-bottom: base(margin) * 0.57; // magic number 1 of 1
				}
			}
			@include nested-modifier(fill) {
				background-color: color(brand, primary);	
				color: color(greyscale, white);
				@include overwrite(heading) {
					color: color(greyscale, white);
				}
				@include overwrite-sub(icon) {
					color: color(greyscale, white);
				}
			}
			&:hover {
				background-color: color(brand, primary);	
				color: color(greyscale, white);
				@include overwrite(heading) {
					color: color(greyscale, white);
				}
				@include overwrite-sub(icon) {
					color: color(greyscale, white);
				}
				@include nested-modifier(fill) {
					background-color: darken(color(brand, primary), 10%);
				}
				@include nested-modifier(panel) {
					border-color: color(brand, primary);
				}
			}
		}
		
		//---------------------------------------------------------
		// Panel
		//---------------------------------------------------------
	
		@include modifier(panel) {
			padding: 4%;
			border-top: 1px solid color(greyscale, grey-2);	
			border-left: 1px solid color(greyscale, grey-2);
			@include nested-modifier(small) {
				padding: 4% 2%;
			}
		}
		
		//---------------------------------------------------------
		// Border
		//---------------------------------------------------------
	
		@include modifier(borderTop) {
			border: 0; // reset border
			border-top: 0.6em solid rgba(black, 0.15);
			@include nested-modifier(highlight) {
				border-top-color: color(brand, primary);
				&:hover {
					border-top-color: rgba(black, 0.15);
				}
			}
		}
	
		@include modifier(borderLeft) {
			border-left: 0.6em solid rgba(black, 0.15);
			@include nested-modifier(highlight) {
				border-left-color: color(brand, primary);
				&:hover {
					border-left-color: rgba(black, 0.15);
				}
			}
		}
		
		//---------------------------------------------------------
		// Card
		//---------------------------------------------------------
		
		@include modifier(card) {
			@include overwrite-sub(content) {
				border: 1px solid rgba(black, 0.1);
				border-top: 0;
				padding: base(margin);
			}
			@include overwrite(thumbnail) {
				margin-bottom: 0;
			}
		}
	
		//---------------------------------------------------------
		// Stacked
		//---------------------------------------------------------
		
		@include modifier(stacked) {
			margin-bottom: base(margin);
			@include vertical-rhythm(bottom);
			p {
				margin-top: (base(margin) / 2);
			}
		}
		
		//---------------------------------------------------------
		// Scale
		//---------------------------------------------------------
	
		@include modifier(scale) {
			z-index: 1;
			transform: translateZ(0);
			&:hover {
				transform: scale(1.1) translateZ(0);
				z-index: 5;
			}
		}
		
		//---------------------------------------------------------
		// Zoom
		//---------------------------------------------------------
		
		@include modifier(zoom) {
			overflow: hidden;
			@include overwrite-sub(group, $parent: heading) {
				color: color(greyscale, white);
			}
			&:hover {
				.bg-img {
					transform: scale(1.3);
				}
			}
		}
		
		//---------------------------------------------------------
		// Media
		//---------------------------------------------------------
		
		@include modifier(media) {
			position: relative;
		}
		
		//---------------------------------------------------------
		// Spectrum
		//---------------------------------------------------------
		
		@include modifier(spectrum-quarter) {
			color: color(greyscale, white);
			padding: 2.5em 1em;
			&:nth-child(1) {
				background: darken(color(brand, primary), 6%);
			}
			&:nth-child(2) {
				background: darken(color(brand, primary), 2%);
			}
			&:nth-child(3) {
				background: lighten(color(brand, primary), 2%);
			}
			&:nth-child(4) {
				background: lighten(color(brand, primary), 6%);
			}
			@include overwrite(icon) {
				color: rgba(color(greyscale, white), 0.5);
			}
			&:hover {
				@include overwrite(icon) {
					color: color(greyscale, white);
				}
			}
		}
		
		//---------------------------------------------------------
		// Tub
		//---------------------------------------------------------
	
		@include modifier(tub) {
			padding: 0;
			position: relative;
			&:before {
				@extend %fill-parent;
				content: "";
				background: rgba(black, 0.4);
			}
			&:hover {
				@include overwrite-sub(lid) {
					transform: translateY(-100%);
				}
				@include overwrite-sub(content) {
					transform: scale(1) translateY(-50%);
				}
			}
			@include overwrite-sub(content) {
				@extend %horizontal-center;
				position: absolute;
				top: calc(50% - 1em);
				width: 80%;
				transition: base(transition);
				transform: scale(0) translateY(-50%);
			}
		}
		
		@include sub-component(lid) {
			background-color: inherit;
			position: relative;
			transition: base(transition);
			padding: 4em 1em;
			z-index: 2;
		}
		
		//---------------------------------------------------------
		// Feature
		//---------------------------------------------------------
		
		@include modifier(feature) {
			padding: 15% 2em 2em;
		}
	
		//---------------------------------------------------------
		// Greyscale
		//---------------------------------------------------------
		
		@include modifier(greyscale) {    
			filter: url("data:image/svg+xml;utf8,&lt;svg xmlns=\'http://www.w3.org/2000/svg\'&gt;&lt;filter id=\'grayscale\'&gt;&lt;feColorMatrix type=\'matrix\' values=\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\'/&gt;&lt;/filter&gt;&lt;/svg&gt;#grayscale"); // Firefox 10+, Firefox on Android
    		filter: gray; // IE6-9
			-webkit-filter: grayscale(100%);
			&:hover {
				filter: url("data:image/svg+xml;utf8,&lt;svg xmlns=\'http://www.w3.org/2000/svg\'&gt;&lt;filter id=\'grayscale\'&gt;&lt;feColorMatrix type=\'matrix\' values=\'1 0 0 0 0, 0 1 0 0 0, 0 0 1 0 0, 0 0 0 1 0\'/&gt;&lt;/filter&gt;&lt;/svg&gt;#grayscale");
    			-webkit-filter: grayscale(0%);
			}
		}
		
		//---------------------------------------------------------
		// Article
		//---------------------------------------------------------
        
        @include modifier('article') {
            margin-bottom: base(margin);
            &:after {
                content: "";
                display: block;
                margin-top: base(margin);
			    @include extend(
                    $parent: 'hrule', 
                    $modifiers: 'stripes'
                );
            }
            &:last-of-type {
                margin-bottom: 0;
                &:after {
                    display: none;
                }
            }
            + .ias-noneleft {
               position: relative;
               bottom: 0;
               margin-top: base('margin');
            }
        }
			
	// Sub Components
	//-------------------------------------------------------------
	
		@include sub-component {
			@include modifier(inline) {
				display: inline-block;
				vertical-align: middle;
				margin-bottom: 0 !important;
				+ p {
					margin-top: (base(margin) / 2);
				}
			}
		}
		
		//---------------------------------------------------------
		// Group
		//---------------------------------------------------------
		
		@include sub-component(group) {
			@include modifier(large) {
				margin-bottom: (base(margin) * 2);
				@include vertical-rhythm(bottom);
			}
			@include modifier(grid) {
				margin-bottom: -#{option($grid, options, gutter)} !important;
				@include overwrite(widget) {
					margin-bottom: option($grid, options, gutter);
				}
			}
		}
		
		//---------------------------------------------------------
		// Icon
		//---------------------------------------------------------
		
		@include sub-component(icon) {
			color: color(greyscale, grey-3);
			margin-bottom: base(margin);
			@include modifier(inline) {
				margin-right: 0.5rem;
			}
			@include context(parent-hovered) {
				color: color(brand, primary);
			}
		}
		
		//---------------------------------------------------------
		// Header
		//---------------------------------------------------------
		
		@include sub-component(header) {
			@include overwrite-sub(icon, $special: adjacent-sibling) {
				margin-left: 0.5rem;
				margin-right: 0;
			}
			.col-full & {
				position: absolute;
				bottom: 2em;
			}
		}
		
		//---------------------------------------------------------
		// Controls
		//---------------------------------------------------------
		
		@include sub-component(controls) {
			position: absolute;
			bottom: 0;
		}
	
	} // component(widget)
	
} // @mixin widgets