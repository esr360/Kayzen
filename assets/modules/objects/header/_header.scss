//=================================================================
// Header
//=================================================================

@mixin header($custom: ()) {

    //-------------------------------------------------------------
    // Config
    //-------------------------------------------------------------

    $header: config((
        'name'                 : 'app-header',
        'output-JSON'          : true,
        // Options
        'background'           : base('background'),
        'height'               : 100px,
        'font-size'            : 1em,
        'z-index'              : 5,
        // Settings
        'bar'                  : true,
        'absolute'             : (
            'enabled'          : false,
            'top-position'     : 0
        ),
        'dark'                 : (
            'enabled'          : false,
            'background'       : color('greyscale', 'grey-6')
        ),
        'side'                 : (
            'enabled'          : false,
            'width'            : 350px,
            'container-width'  : 100%,
            'show-y-scrollbar' : false
        ),
        'sticky'               : (
            'enabled'          : false,
            'background'       : color('greyscale', 'grey-6'),
            'height'           : 70px,
            'logo-height'      : 28px,
            'font-size'        : font-size('size-2')
        )
    ), $custom) !global;

    //-------------------------------------------------------------
    // Module
    //-------------------------------------------------------------

    @include module {

    // Core Styles
    //-------------------------------------------------------------

        font-size: this('font-size');
        
        @if not this('side') {
            background: this('background');
        }
        
        @if this('fixed') {
            margin-top: this('height');
        }

    // Settings
    //-------------------------------------------------------------

        // Header Bar
        //---------------------------------------------------------
        
        @include option('bar') {
            @include overwrite-component('wrapper') {	
                display: table;
                width: 100%;
            }
            @include overwrite(('logo', 'navigation')) {
                display: table-cell;
                vertical-align: middle;
            }
        }
        
        // Absolute Position Header
        //---------------------------------------------------------
        
        @include option('absolute') {
            position: absolute;
            margin-top: this('absolute', 'top-position');
            z-index: this('z-index');
            width: 100%;
        }

        // Side Header
        //---------------------------------------------------------

        @include option('side') {
            
            // Side Navigation
            @extend #{$side-nav-selector};
            
            width: this('side', 'width');
            left: -#{this('side', 'width')};
            
            @include overwrite('container') {
                max-width: this('side', 'container-width');
            }
            
            @include overwrite(('logo', 'navigation')) {
                display: block;
            }
            
            @include overwrite('logo') {
                img {
                    height: this('sticky', 'logo-height');
                }
            }
            
            @include value($value: 'left') {
                @media (min-width: breakpoint('break-4')) {
                    left: 0;
                    right: auto;
                    ~ #site-content {
                        margin-left: this('side', 'width');
                        @include overwrite('top-bar', $is: 'fixed') {
                            width: calc(100% - #{this('side', 'width')});
                        }
                        @if option($top-bar, 'fixed') {
                            width: calc(100% - #{this('side', 'width')});
                        }
                    }
                    ~ .search-box {
                        width: calc(100% - #{this('side', 'width')});
                        right: 0;
                    }
                }
            }
            
            @include value($value: 'right') {
                @media (min-width: breakpoint('break-4')) {
                    right: 0;
                    left: auto;
                    ~ #site-content {
                        margin-right: this('side', 'width');
                    }
                    ~ .search-box {
                        width: calc(100% - #{this('side', 'width')});
                        left: 0;
                    }
                }
            }
            
            // Always show vertical scrollbars
            @include value($setting: 'show-y-scrollbar') {
                overflow-y: scroll;
            }
            
        } // setting('side')
        
        // Dark Header
        //---------------------------------------------------------

        @include option('dark') {
            background-color: this('dark', 'background');
        }
        
        // Brand Header
        //---------------------------------------------------------
        
        @include modifier('brand') {
            background-color: color('brand', 'primary');
        }
        
        // Sticky Header
        //---------------------------------------------------------
        
        @include option('sticky') {
            &.fixed {
                position: fixed;
                margin-top: 0;
                top: 0;
                width: 100%;
                z-index: 12;
                background: this('sticky', 'background');
                font-size: this('sticky', 'font-size');
                @include overwrite-component('wrapper') {
                    height: this('sticky', 'height');
                }
                @include overwrite('logo') {
                    img {
                        height: this('sticky', 'logo-height');
                    }
                }
                @include modifier('absolute', 'not') {
                    @include overwrite('billboard', $special: 'adjacent-sibling') {
                        margin-top: this('sticky', 'height');
                    }
                }
            }
        }
        
    // Components
    //-------------------------------------------------------------

        @include component('wrapper') {
            height: this('height');
            transition: height base('transition');
        }
        
    } // module
    
    // Hide the header when body had special class
    .toggleHeader {
        #site-content {
            margin-left: 0;
        }
        @include overwrite('top-bar') {
            width: 100% !important;
        }
        @include overwrite('app-header') {
            left: -#{option($header, 'side', 'width')};
        }
        .search-box {
            width: 100%;
        }
    }

} // @mixin header